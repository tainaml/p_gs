{%extends 'home/layout/base.html' %}

{% block title %}Portal GSTI - Resultado da busca por Python{% endblock %}

{% block content %}
    <main class="container main">
        <div class="row">

            {% include "search/partials/search-sidebar-left.html" with local_context=request.path|cut:'/search'|cut:'/'|default:'all' %}

            <div class="col-lg-9 result-wrapper">

                {% if articles.object_list %}
                    <div class="result-container">
                        <header class="area-title">
                            <h2>Publicações</h2>
                        </header>
                        <div class="area-content">
                            <div class="row j-scroll-articles j-scroll-container-articles">
                                {% include "search/partials/search-articles.html" %}
                            </div>
                        </div>
                    </div>
                {% endif %}


                {% if communities.object_list %}
                    <div class="result-container">
                        <header class="area-title">
                            <h2>Comunidades</h2>
                        </header>
                        <div class="area-content">
                            <div class="row j-scroll-communities j-scroll-container-communities">
                                {% include "search/partials/search-communities.html" %}
                            </div>
                        </div>
                    </div>
                {% endif %}


                {% if users.object_list %}
                    <div class="result-container">
                        <header class="area-title">
                            <h2>Pessoas</h2>
                        </header>
                        <div class="area-content">
                            <div class="row j-scroll-users j-scroll-container-users">
                                {% include "search/partials/search-users.html" %}
                            </div>
                        </div>
                    </div>
                {% endif %}


                {% if questions.object_list %}
                    <div class="result-container">
                        <header class="area-title">
                            <h2>Perguntas</h2>
                        </header>
                        <div class="area-content">
                            <div class="row j-scroll-questions j-scroll-container-questions">
                                {% include "search/partials/search-questions.html" %}
                            </div>
                        </div>
                    </div>
                {% endif %}

                {% if not articles.object_list and not communities.object_list and not users.object_list and not questions.object_list %}
                    {% comment %}
                    <div class="result-container">
                        <header class="area-title">
                            <h2>Perguntas</h2>
                        </header>
                        <div class="area-content">
                            <div class="row j-scroll-questions j-scroll-container-questions">
                            </div>
                        </div>
                    </div>
                    {% endcomment %}
                    <hr>
                    <p class="text-center">Nenhum resultado foi encontrado para a busca!</p>
                    <hr>
                {% endif %}

            </div>
        </div>
    </main>
{% endblock %}


{% block javascripts %}
    {{ block.super }}

    <script>
        $(function() {
            var loaderHtml = '<div class="col-lg-12"><div class="load-async-preload"></div></div>';
            $(".j-scroll-communities").jscroll({
                autoTrigger: false,
                loadingHtml: loaderHtml,
                contentSelect: ".j-scroll-container-communities",
                nextSelect: "a[data-jscroll-next-communities]"
            });

            $(".j-scroll-users").jscroll({
                autoTrigger: false,
                loadingHtml: loaderHtml,
                contentSelect: ".j-scroll-container-user",
                nextSelect: "a[data-jscroll-next-user]"
            });

            $(".j-scroll-articles").jscroll({
                autoTrigger: false,
                loadingHtml: loaderHtml,
                contentSelect: ".j-scroll-container-articles",
                nextSelect: "a[data-jscroll-next-articles]"
            });

            $(".j-scroll-questions").jscroll({
                autoTrigger: false,
                loadingHtml: loaderHtml,
                contentSelect: ".j-scroll-container-questions",
                nextSelect: "a[data-jscroll-next-questions]"
            });
        });
    </script>
{% endblock %}