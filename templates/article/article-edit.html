{%extends 'home/layout/base.html' %}

{% load i18n %}
{% load widget_tweaks %}

{% block title %}Portal GSTI - Editar Artigo{% endblock %}

{% block content %}
    <main class="container">
        <div class="row creator">

            <form action="" method="post" enctype="multipart/form-data">

                {% csrf_token %}

                {% if messages %}
                    <ul class="messages">
                        {% for message in messages %}
                            <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}

                {{ form_article.non_field_errors }}

                <div class="col-lg-12">
                    <header class="area-title col-lg-7">
                        <h2>Editar Artigo</h2>
                    </header>
                    <div class="col-lg-5 text-right">
                        <a href="javascript:;" class="btn-default">Voltar</a>
                        <input type="submit" class="btn-default" value="{% trans "Save" context "save article" %}" name="submit-save" />
                        {% if article.slug and article.id %}
                            <a href="{% url 'article:view' article.slug article.id %}" class="btn-default" target="_blank">Visualizar</a>
                        {% endif %}
                        {% if not article.is_published %}
                            <input class="btn-green" type="submit" value="{% trans "Publish" context "publish article" %}" name="submit-publish" />
                        {% endif %}
                    </div>
                </div>
                <div class="col-lg-12">
                    <div class="editor">
                        <p class="help-text"><span>ATENÇÃO:</span> <br>
                            Antes de escrever um artigo certifique-se que seu conteúdo não seja copia de outro e que não contenha erros de português. <br>
                            Artigos que são submetidos a comunidades que não possuem relação vão ser penalizados. Leia as regras do Portal para saber mais.</p>
                        <div class="wrap-editor row">
                            <div class="col-lg-9">
                                <div class="form-group">
                                    {% render_field form_article.title placeholder="Titulo do artigo" class="form-control" %}
                                    {% if form_article.title.errors %}  {{ form_article.title.errors }} {% endif %}
                                </div>
                                <div class="form-group">
                                    {% render_field form_article.text placeholder="Conteúdo do artigo" class="form-control" rows="10" cols="30" %}
                                    {% if form_article.text.errors %}  {{ form_article.text.errors }} {% endif %}
                                    <p class="article-counter">Mínimo de caracteres: <span class="article-counter-caracteres">200</span></p>
                                </div>
                                <div class="form-group">
                                    <input class="form-control" type="text" placeholder="Enviar artigo para qual(is) comunidade(s)?">
                                </div>
                                <div class="form-group">
                                    {{ form_article.taxonomies }}
                                </div>
                            </div>
                            <div class="col-lg-3">
                                {% if not article.status == article.STATUS_PUBLISH %}
                                    <label class="form-group">
                                <span class="custom-radio">
                                    <input type="radio" name="publish-date" value="today" checked="checked">
                                </span>
                                        <input class="form-control" style="display: inline; width: auto;" placeholder="Publicar artigo hoje" readonly type="text">
                                    </label>
                                    <label class="form-group">
                                <span class="custom-radio">
                                    <input type="radio" name="publish-date">
                                </span>
                                        {% render_field form_article.publishin placeholder="Agendar Publicaçao" class="form-control" type="date" %}
                                        {% if form_article.publishin.errors %}  {{ form_article.publishin.errors }} {% endif %}
                                    </label>
                                {% endif %}
                                {% if article.image %}
                                    <img src="{{ article.image.url }}" class="img-responsive" />
                                {% endif %}
                                <div class="custom-file-upload">
                                    <i class="gsticon gsticon-cloud-upload"></i>
                                    <h3>Imagem de capa</h3>
                                    <p>Arraste a imagem para este campo ou <a href="javascript:;">clique aqui</a></p>
                                    <input type="file" name="{{ form_article.prefix }}-{{ form_article.image.name }}" style="width: 100%" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </main>
{% endblock %}